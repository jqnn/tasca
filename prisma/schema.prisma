generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id           Int        @id @default(autoincrement())
  userName     String     @unique
  displayName  String?
  password     String?
  authMethodId Int
  authMethod   AuthMethod @relation(fields: [authMethodId], references: [id])
  role         Role       @default(USER)
  createdAt    DateTime   @default(now())
}

model AuthMethod {
  id            Int            @id @default(autoincrement())
  type          AuthMethodType @default(LOCAL)
  description   String         @unique
  controllers   String?
  baseDN        String?
  securityType  SecurityType?  @default(NONE)
  port          Int?           @default(389)
  userName      String?
  password      String?
  usersDN       String?
  uidAttribute  String?
  accountSuffix String?
  User          User[]
}

enum Role {
  ADMINISTRATOR
  OPERATOR
  USER
}

enum AuthMethodType {
  LOCAL
  AD
  LDAP
}

enum SecurityType {
  NONE
  TLS
  SSL
}
